

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How To Configure Selenium Grid &mdash; Solutions Delivery Platform  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Solutions Delivery Platform
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference external" href="https://jenkinsci.github.io/templating-engine-plugin">Jenkins Templating Engine</a></li>
<li class="toctree-l1"><a class="reference external" href="https://boozallen.github.io/sdp-libraries">Pipeline Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deployment-guides/openshift/index.html">OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Learning Labs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../labs/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/try-it-out/docs/index.html">Try It Out</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="helm-multitenancy.html">Helm Multitenancy</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_jenkins_credentials.html">Add Credentials to Jenkins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://help.github.com/articles/creating-a-new-organization-from-scratch/">Create a GitHub Organization</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.twistlock.com/2018/05/08/securing-containers-red-hat-openshift-twistlock-deployment-script/">Deploy Twistlock to OpenShift</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Solutions Delivery Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>How To Configure Selenium Grid</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/how-to/selenium_grid_configurations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-configure-selenium-grid">
<h1>How To Configure Selenium Grid<a class="headerlink" href="#how-to-configure-selenium-grid" title="Permalink to this headline">¶</a></h1>
<p>Selenium Grid is a web browser testing tool that allows a series of automated test to run in parallel across multiple browsers and versions.</p>
<p>From any Pod/Container in the OpenShift cluster you are able to access Selenium Grid via the Service (selenium-hub.sdp.svc).</p>
<div class="section" id="installing-libraries">
<h2>Installing Libraries<a class="headerlink" href="#installing-libraries" title="Permalink to this headline">¶</a></h2>
<p>Before writing any test the correct libraries must be installed. For more information installing libraries access the official Selenium Grid documentation <a class="reference external" href="https://www.seleniumhq.org/docs/03_webdriver.jsp#introducing-webdriver">https://www.seleniumhq.org/docs/03_webdriver.jsp#introducing-webdriver</a></p>
<p>The Webdriver API must be setup to access Selenium Grid Remotely.
Below are two example stings for configuring the driver.  When using the SDP Cluster the Openshift Service address for accessing Selenium Hub is:
<strong>selenium-hub.sdp.svc:4444</strong></p>
</div>
<div class="section" id="remote-webdriver">
<h2>Remote WebDriver<a class="headerlink" href="#remote-webdriver" title="Permalink to this headline">¶</a></h2>
<p>In both examples replace &lt;BROWSER&gt; with the type of browser being used.</p>
<p><strong>Python</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Remote</span><span class="p">(</span><span class="n">command_executor</span><span class="o">=</span><span class="s2">&quot;http://selenium-hub.sdp.svc:4444/wd/hub&quot;</span><span class="p">,</span><span class="n">webdriver</span><span class="o">.</span><span class="n">DesiredCapabilities</span><span class="o">.&lt;</span><span class="n">BROWSER</span><span class="o">&gt;.</span><span class="n">copy</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>Java</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">driver</span> <span class="o">=</span> <span class="n">new</span> <span class="n">RemoteWebDriver</span><span class="p">(</span><span class="n">new</span> <span class="n">URL</span><span class="p">(</span><span class="s2">&quot;http://selenium-hub.sdp.svc:4444/wd/hub”),</span>
         <span class="n">DesiredCapabilities</span><span class="o">.&lt;</span><span class="n">browser</span><span class="o">&gt;</span><span class="p">());</span>
</pre></div>
</div>
<p>For More examples for creating a Remote WebDriver in other languages (<em>c#, ruby, javascript, and php</em>) visit the official Selenium Grid documentation.
<a class="reference external" href="https://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#remotewebdriver">https://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#remotewebdriver</a></p>
<p>Python Selenium Grid Minimal Example.  In the example below the script connects into the Selenium Hub. From there the Hub makes a request to the Chrome Node running a series of simple test. If all test succeed the driver prints the title of the website loaded (Google.com) then releases the driver object.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cat &gt; SGTest.py &lt;&lt;EOF
#Simple test written in Python for Selenium Grid

from selenium import webdriver

driver = webdriver.Remote(
   command_executor=&quot;http://selenium-hub.sdp.svc:4444/wd/hub&quot;,
   desired_capabilities={
            &quot;browserName&quot;: &quot;chrome&quot;,
            &quot;version&quot;: &quot;67.0.3396.87&quot;,
            &quot;video&quot;: &quot;True&quot;,
    &quot;platform&quot;: &quot;LINUX&quot;,
    &quot;platformName&quot;: &quot;LINUX&quot;,
   })

print (driver.session_id)

try:
    driver.implicitly_wait(30)
    driver.set_window_position(0,0)
    driver.set_window_size(1920,1080)
    driver.get(&quot;http://www.google.com&quot;)
    print driver.title
finally:
    driver.quit()
EOF

$ python SGTest.py
</pre></div>
</div>
</div>
<div class="section" id="adding-a-new-node">
<h2>Adding a new Node<a class="headerlink" href="#adding-a-new-node" title="Permalink to this headline">¶</a></h2>
<p>If needed adding a new node requires creating a new OpenShift Pod/Deployment. A good place to start is by using the Selenium Grid NodeBase image. <a class="reference external" href="https://github.com/SeleniumHQ/docker-selenium/tree/master/NodeBase">https://github.com/SeleniumHQ/docker-selenium/tree/master/NodeBase</a>.</p>
<p>When configuring the nodes make sure to set the Pods environment variables are set too</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HUB_HOST</span><span class="p">:</span> <span class="n">selenium</span><span class="o">-</span><span class="n">hub</span><span class="o">.</span><span class="n">sdp</span><span class="o">.</span><span class="n">svc</span>
<span class="n">HUB_PORT_PARAM</span><span class="p">:</span> <span class="mi">4444</span>
</pre></div>
</div>
<p>If the pod is attempting to run as the root user add these two additional environment variables to the pod</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">USER</span><span class="p">:</span> <span class="n">seluser</span>
<span class="n">HOME</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">seluser</span>
</pre></div>
</div>
<p>Then add the following code to the top of the entry_point.sh file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>if ! whoami &amp;&gt; /dev/null; then
  if [ -w /etc/passwd ]; then
    echo &quot;${USER_NAME:-default}:x:$(id -u):0:${USER_NAME:-default} user:${HOME}:/sbin/nologin&quot; &gt;&gt; /etc/passwd
  fi
fi
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>